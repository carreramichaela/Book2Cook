<%= form_with model: book, local: true do |f| %>
  <div class="form-group">
    <%= f.label :name, autocomplete: "off" %>
    <%= f.text_field :name, class: "form-control" %>

    <%= f.label :subtitle %>
    <%= f.text_field :subtitle, class: "form-control" %>

    <%= f.label :dedication %>
    <%= f.text_field :dedication, class: "form-control" %>

    <%= f.label :footer %>
    <%= f.text_field :footer, class: "form-control" %>
  </div>
  <div class="actions">
    <%= f.submit nil , class: "btn btn-primary" %>
    <%= link_to 'Back', book, class: "btn btn-secondary" %>
  </div>
<% end %>

<% if @book == current_book %>
  <h2>Add/Remove Recipes</h2>
  <table class="table">
    <tbody>
      <% current_book.recipes.each do |recipe| %>
        <tr>
          <td>
            <% if current_book.recipes.include?(recipe) %>
              <%= button_to "Remove from #{current_book.name}",
                  book_recipe_cookbook_entries_path(current_book, recipe),
                  method: :delete,
                  class: "btn btn-danger" %>
            <% else %>
              <%= button_to "Add to #{current_book.name}",
                  book_recipe_cookbook_entries_path(current_book, recipe),
                  class: "btn btn-primary" %>
            <% end %>
          </td>
          <td><%= link_to recipe.name, recipe %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
